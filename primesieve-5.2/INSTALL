                =================================
                = primesieve build instructions =
                =================================

Unix-like operating systems
===========================

Download the latest release tarball from
http://primesieve.org/downloads and uncompress it. Then open a
terminal and build and install primesieve using:

$ ./configure
$ make
$ sudo make install

If you cloned primesieve's git repository or downloaded its master
branch then you need to have installed GNU Autotools and Libtool
to build it:

$ ./autogen.sh
$ ./configure
$ make
$ sudo make install

On some operating systems e.g. Solaris the configure script is unable
to detect (prints warning) the CPU's L1 data cache size. If you want
the best performance you can set your CPU's L1 data cache size (per
core) in kilobytes manually using e.g.:

$ ./configure L1_DCACHE_SIZE=64

By default the example programs are not built. If you also want to
build the example programs then you have to enable them in the
configure step:

$ ./configure --enable-examples

If you want to build primesieve using a specific compiler or if you
want to use custom compiler flags you can do this using e.g.:

$ ./configure CXX=my_compiler CXXFLAGS="-O2"
$ make

Linking (Unix-like OSes)
========================

Link against libprimesieve using:

$ c++ -O2 my_program.cpp -lprimesieve
$ cc  -O2 my_program.c   -lprimesieve

By default libprimesieve is installed to /usr/local/lib. If your
operating system misses the `ldconfig' program (e.g. Mac OS X, MinGW)
linking against libprimesieve is likely to fail. Then use one of the
workarounds below:

1) Add -L/usr/local/lib and -I/usr/local/include:

$ c++ -O2 my_program.cpp -lprimesieve -L/usr/local/lib -I/usr/local/include

2) Permanently add /usr/local/lib to your library path using:

export LIBRARY_PATH=/usr/local/lib:$LIBRARY_PATH
export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH

I suggest adding these two export statements to your ~/.bashrc file
(if you use the bash shell). After this you can link against
libprimesieve using:

$ c++ -O2 my_program.cpp -lprimesieve

3) Install primesieve to /usr instead of /usr/local:

$ ./configure --prefix=/usr
$ make
$ sudo make install

$ c++ -O2 my_program.cpp -lprimesieve

Microsoft Visual C++
====================

Download the latest primesieve source archive from
http://primesieve.org/downloads and uncompress it. Then open a Visual
Studio Command Prompt and `cd' into the newly created directory and
run:

> nmake -f Makefile.msvc
> nmake -f Makefile.msvc examples

The second command is optional, it builds the example programs.

On Windows your CPU's L1 data cache size cannot be detected
automatically, the default L1 data cache size in primesieve is 32
kilobytes. If your CPU has a different L1 data cache size then you
should indicate it in order to get the best performance e.g.:

> nmake -f Makefile.msvc L1_DCACHE_SIZE=64

Linking MSVC
============

As `make install` is not supported by Microsoft Visual C++ you need to
copy primesieve.lib and include\primesieve to your program's source
tree. Then link against primesieve.lib using e.g.:

cl /EHsc /O2 /I"include" my_program.cpp /link primesieve.lib

Note that your executable will not depend on primesieve.lib as it is
a static library.
